<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<header th:fragment="dagn_head">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
        <!--인덱스 시작-->
        <div class="container-fluid">
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="navbar-nav me-auto mb-2 mb-md-0">
                    <!--1. 중고 자전거 거래 :: 누르면 중고거래창 이동-->
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/dagnList">중고 자전거 매물</a>
                    </li>

                    <!--2. 새 자전거 판매 목록 :: 누르면 자전거 판매창 이동-->
                    <!-- <li class="nav-group dropdown"> -->
                    <li class="nav-item"></li>
                    <button class="nav-link dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        새 자전거 리스트(준비중)
                    </button>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#">메리다</a></li>
                        <li><a class="dropdown-item" href="#">트렉</a></li>
                        <li><a class="dropdown-item" href="#">자이언트</a></li>
                    </ul>
                    </li>
                    <!--3. 자전거 커뮤니티 게시판 :: 누르면 커뮤니티창 이동-->
                    <li class="nav-item">
                        <a class="nav-link" href="community/community.html">커뮤니티(준비중)</a>
                    </li>
                </ul>
                <!--4. 자전거 브랜드 검색 :: 브랜드 검색 시 [2].자전거 판매 목록 조회 결과 이동-->
                <form class="d-flex" id="brandSearchForm" autocomplete="off" action="/" method="post">
                    <input class="form-control me-2" type="text" id="keyword" placeholder="자전거 브랜드 입력" aria-label="자전거 브랜드 입력">
                    <button class="btn btn-outline-success" type="submit">검색</button>
                </form>

<!--                <div th:if="${session.loginMember == null}" class="top_menu">-->
<!--                    <form id="loginForm"  autocomplete="off" action="/user/login" method="get">-->
<!--                    <button class="btn btn-outline-success login" type="submit">로그인</button>-->
<!--                    </form>-->
<!--                </div>-->
                <div th:if="${session.loginMember == null}" class="top_menu">
                    <button class="btn btn-outline-success login" type="button" onclick="location.href='/user/login'">로그인</button>
                </div>
                <div th:if="${session.loginMember != null}" class="top_menu">
                    <button class="btn btn-outline-success logout" type="button" onclick="location.href='/user/logout'">로그아웃</button>
                    <button class="btn btn-outline-success myname" type="submit" th:text="${'로그인한 사용자: ' + session.loginMember.getUser_id()}"></button>
                </div>
            </div>
        </div>
    </nav>
</header>
<script>
    // JavaScript 코드
    document.addEventListener("DOMContentLoaded", function() {
        var loginForm = document.getElementById("loginForm");
        var loginButton = loginForm.querySelector(".login");

        // 로그인 세션 확인
        var isLoggedIn = checkLoginSession(); // 로그인 세션 확인 함수 호출

        // 로그인 세션이 있는 경우
        if (isLoggedIn) {
            loginButton.textContent = "로그인됨"; // 로그인 버튼의 텍스트 변경
        }

        // 로그인 세션이 없는 경우는 기본 상태로 유지

        // 로그인 세션 확인 함수
        function checkLoginSession() {
            // 여기에 로그인 세션 확인 로직을 구현합니다.
            // 예를 들어, 쿠키, 로컬 스토리지 등을 사용하여 로그인 세션을 확인할 수 있습니다.
            // 로그인 세션이 있는 경우 true를 반환하고, 없는 경우 false를 반환합니다.
        }
    });
</script>
</html>